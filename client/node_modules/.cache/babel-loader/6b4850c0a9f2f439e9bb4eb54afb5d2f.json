{"ast":null,"code":"import _asyncToGenerator from\"/Users/y-jacobmlo/Desktop/mentAllyFinal/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/y-jacobmlo/Desktop/mentAllyFinal/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/y-jacobmlo/Desktop/mentAllyFinal/client/node_modules/@babel/runtime/regenerator/index.js\";import axios from\"axios\";import{createContext,useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export var AuthContext=/*#__PURE__*/createContext();export var AuthContexProvider=function AuthContexProvider(_ref){var children=_ref.children;var _useState=useState(JSON.parse(localStorage.getItem(\"user\"))||0),_useState2=_slicedToArray(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1];var login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(inputs){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"/auth/login\",inputs);case 2:res=_context.sent;setCurrentUser(res.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function login(_x){return _ref2.apply(this,arguments);};}();var logout=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(inputs){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log('logout called');_context2.next=3;return axios.post(\"/auth/logout\");case 3:console.log('axios route logout called');localStorage.removeItem(\"user\");console.log('user removed');setCurrentUser(0);console.log('user set to null');case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function logout(_x2){return _ref3.apply(this,arguments);};}();useEffect(function(){localStorage.setItem(\"user\",JSON.stringify(currentUser));},[currentUser]);return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{currentUser:currentUser,login:login,logout:logout},children:children});};","map":{"version":3,"sources":["/Users/y-jacobmlo/Desktop/mentAllyFinal/client/src/context/authContext.js"],"names":["axios","createContext","useEffect","useState","AuthContext","AuthContexProvider","children","JSON","parse","localStorage","getItem","currentUser","setCurrentUser","login","inputs","post","res","data","logout","console","log","removeItem","setItem","stringify"],"mappings":"+YAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,aAAT,CAAwBC,SAAxB,CAAmCC,QAAnC,KAAmD,OAAnD,C,2CAEA,MAAO,IAAMC,CAAAA,WAAW,cAAGH,aAAa,EAAjC,CAEP,MAAO,IAAMI,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,MAAkB,IAAfC,CAAAA,QAAe,MAAfA,QAAe,CAClD,cAAsCH,QAAQ,CAC5CI,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,GAA4C,CADA,CAA9C,wCAAOC,WAAP,eAAoBC,cAApB,eAIA,GAAMC,CAAAA,KAAK,2FAAG,iBAAOC,MAAP,gJACMd,CAAAA,KAAK,CAACe,IAAN,CAAW,aAAX,CAA0BD,MAA1B,CADN,QACNE,GADM,eAEZJ,cAAc,CAACI,GAAG,CAACC,IAAL,CAAd,CAFY,sDAAH,kBAALJ,CAAAA,KAAK,6CAAX,CAKA,GAAMK,CAAAA,MAAM,2FAAG,kBAAOJ,MAAP,sHACbK,OAAO,CAACC,GAAR,CAAY,eAAZ,EADa,uBAEPpB,CAAAA,KAAK,CAACe,IAAN,CAAW,cAAX,CAFO,QAGbI,OAAO,CAACC,GAAR,CAAY,2BAAZ,EACAX,YAAY,CAACY,UAAb,CAAwB,MAAxB,EACAF,OAAO,CAACC,GAAR,CAAY,cAAZ,EACAR,cAAc,CAAC,CAAD,CAAd,CACAO,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAPa,wDAAH,kBAANF,CAAAA,MAAM,8CAAZ,CAUAhB,SAAS,CAAC,UAAM,CACdO,YAAY,CAACa,OAAb,CAAqB,MAArB,CAA6Bf,IAAI,CAACgB,SAAL,CAAeZ,WAAf,CAA7B,EACD,CAFQ,CAEN,CAACA,WAAD,CAFM,CAAT,CAIA,mBACE,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAE,CAAEA,WAAW,CAAXA,WAAF,CAAeE,KAAK,CAALA,KAAf,CAAsBK,MAAM,CAANA,MAAtB,CAA7B,UACGZ,QADH,EADF,CAKD,CA7BM","sourcesContent":["import axios from \"axios\";\nimport { createContext, useEffect, useState } from \"react\";\n\nexport const AuthContext = createContext();\n\nexport const AuthContexProvider = ({ children }) => {\n  const [currentUser, setCurrentUser] = useState(\n    JSON.parse(localStorage.getItem(\"user\")) || 0\n  );\n\n  const login = async (inputs) => {\n    const res = await axios.post(\"/auth/login\", inputs);\n    setCurrentUser(res.data);\n  };\n\n  const logout = async (inputs) => {\n    console.log('logout called');\n    await axios.post(\"/auth/logout\");\n    console.log('axios route logout called');\n    localStorage.removeItem(\"user\");\n    console.log('user removed');\n    setCurrentUser(0);\n    console.log('user set to null');\n  };\n\n  useEffect(() => {\n    localStorage.setItem(\"user\", JSON.stringify(currentUser));\n  }, [currentUser]);\n\n  return (\n    <AuthContext.Provider value={{ currentUser, login, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}